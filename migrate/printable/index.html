<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex,nofollow"/><title>Combined printable page | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="Combined printable page | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="https://webpack.js.org/dcd5e077cf9f54ebe52d4f7ebe8c3080.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="/bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="/bac031f59adf718c12e5.css"/><link rel="stylesheet" href="/2cfa8869d2ddd0b25afd.css"/><link rel="manifest" href="/manifest.json"/><link rel="canonical" href="https://webpack.js.org/migrate/printable/"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="/icon_192x192.png"/><link rel="icon" sizes="512x512" href="/icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="/icon_180x180.png"/><link rel="mask-icon" href="/aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  navigation__item--active" href="/concepts/">文档</a><a class="navigation__item  " href="/contribute/">参与贡献</a><a class="navigation__item  " href="/vote/">投票</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">博客</a><a href="https://docschina.org" target="_blank" rel="noopener" class="navigation__item  ">印记中文</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"><a class="navigation-sub__link " title="指南" content="指南" href="/guides/">指南</a><a class="navigation-sub__link " title="api" content="api" href="/api/">api</a><a class="navigation-sub__link " title="plugin" content="plugin" href="/plugins/">plugin</a><a class="navigation-sub__link " title="概念" content="概念" href="/concepts/">概念</a><a class="navigation-sub__link " title="配置" content="配置" href="/configuration/">配置</a><a class="navigation-sub__link navigation-sub__link--active" title="迁移" content="迁移" href="/migrate/">迁移</a><a class="navigation-sub__link " title="loader" content="loader" href="/loaders/">loader</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="/bf176a25b4f8227fea804854c98dc5e2.png"/><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="/migrate/printable/" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="/migrate/">Migrate</a></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/migrate/5/">从 v4 升级到 v5</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="准备工作"><a href="/migrate/5/#准备工作">准备工作</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="升级 webpack 以及它的依赖"><a href="/migrate/5/#升级-webpack-以及它的依赖">升级 webpack 以及它的依赖</a></li></ul></li><li class="sidebar-item__anchor" title="内核的改变"><a href="/migrate/5/#内核的改变">内核的改变</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="加载器的 getOptions 方法"><a href="/migrate/5/#加载器的-getoptions-方法">加载器的 getOptions 方法</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/migrate/4/">To v4 from v3</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Node.js v4"><a href="/migrate/4/#nodejs-v4">Node.js v4</a></li><li class="sidebar-item__anchor" title="CLI"><a href="/migrate/4/#cli">CLI</a></li><li class="sidebar-item__anchor" title="Update plugins"><a href="/migrate/4/#update-plugins">Update plugins</a></li><li class="sidebar-item__anchor" title="mode"><a href="/migrate/4/#mode">mode</a></li><li class="sidebar-item__anchor" title="Deprecated/Removed plugins"><a href="/migrate/4/#deprecatedremoved-plugins">Deprecated/Removed plugins</a></li><li class="sidebar-item__anchor" title="CommonsChunkPlugin"><a href="/migrate/4/#commonschunkplugin">CommonsChunkPlugin</a></li><li class="sidebar-item__anchor" title="import() and CommonJS"><a href="/migrate/4/#import-and-commonjs">import() and CommonJS</a></li><li class="sidebar-item__anchor" title="json and loaders"><a href="/migrate/4/#json-and-loaders">json and loaders</a></li><li class="sidebar-item__anchor" title="module.loaders"><a href="/migrate/4/#moduleloaders">module.loaders</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/migrate/3/">To v2 or v3 from v1</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="resolve.root, resolve.fallback, resolve.modulesDirectories"><a href="/migrate/3/#resolveroot-resolvefallback-resolvemodulesdirectories">resolve.root, resolve.fallback, resolve.modulesDirectories</a></li><li class="sidebar-item__anchor" title="resolve.extensions"><a href="/migrate/3/#resolveextensions">resolve.extensions</a></li><li class="sidebar-item__anchor" title="resolve.*"><a href="/migrate/3/#resolve">resolve.*</a></li><li class="sidebar-item__anchor" title="module.loaders is now module.rules"><a href="/migrate/3/#moduleloaders-is-now-modulerules">module.loaders is now module.rules</a></li><li class="sidebar-item__anchor" title="Chaining loaders"><a href="/migrate/3/#chaining-loaders">Chaining loaders</a></li><li class="sidebar-item__anchor" title="Automatic -loader module name extension removed"><a href="/migrate/3/#automatic--loader-module-name-extension-removed">Automatic -loader module name extension removed</a></li><li class="sidebar-item__anchor" title="json-loader is not required anymore"><a href="/migrate/3/#json-loader-is-not-required-anymore">json-loader is not required anymore</a></li><li class="sidebar-item__anchor" title="Loaders in configuration resolve relative to context"><a href="/migrate/3/#loaders-in-configuration-resolve-relative-to-context">Loaders in configuration resolve relative to context</a></li><li class="sidebar-item__anchor" title="module.preLoaders and module.postLoaders were removed:"><a href="/migrate/3/#modulepreloaders-and-modulepostloaders-were-removed">module.preLoaders and module.postLoaders were removed:</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin sourceMap"><a href="/migrate/3/#uglifyjsplugin-sourcemap">UglifyJsPlugin sourceMap</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin warnings"><a href="/migrate/3/#uglifyjsplugin-warnings">UglifyJsPlugin warnings</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin minimize loaders"><a href="/migrate/3/#uglifyjsplugin-minimize-loaders">UglifyJsPlugin minimize loaders</a></li><li class="sidebar-item__anchor" title="DedupePlugin has been removed"><a href="/migrate/3/#dedupeplugin-has-been-removed">DedupePlugin has been removed</a></li><li class="sidebar-item__anchor" title="BannerPlugin - breaking change"><a href="/migrate/3/#bannerplugin---breaking-change">BannerPlugin - breaking change</a></li><li class="sidebar-item__anchor" title="OccurrenceOrderPlugin is now on by default"><a href="/migrate/3/#occurrenceorderplugin-is-now-on-by-default">OccurrenceOrderPlugin is now on by default</a></li><li class="sidebar-item__anchor" title="ExtractTextWebpackPlugin - breaking change"><a href="/migrate/3/#extracttextwebpackplugin---breaking-change">ExtractTextWebpackPlugin - breaking change</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ExtractTextPlugin.extract"><a href="/migrate/3/#extracttextpluginextract">ExtractTextPlugin.extract</a></li><li class="sidebar-item__anchor" title="new ExtractTextPlugin({options})"><a href="/migrate/3/#new-extracttextpluginoptions">new ExtractTextPlugin({options})</a></li></ul></li><li class="sidebar-item__anchor" title="Full dynamic requires now fail by default"><a href="/migrate/3/#full-dynamic-requires-now-fail-by-default">Full dynamic requires now fail by default</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using custom arguments in CLI and configuration"><a href="/migrate/3/#using-custom-arguments-in-cli-and-configuration">Using custom arguments in CLI and configuration</a></li></ul></li><li class="sidebar-item__anchor" title="require.ensure and AMD require are asynchronous"><a href="/migrate/3/#requireensure-and-amd-require-are-asynchronous">require.ensure and AMD require are asynchronous</a></li><li class="sidebar-item__anchor" title="Loader configuration is through options"><a href="/migrate/3/#loader-configuration-is-through-options">Loader configuration is through options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="What are options?"><a href="/migrate/3/#what-are-options">What are options?</a></li></ul></li><li class="sidebar-item__anchor" title="LoaderOptionsPlugin context"><a href="/migrate/3/#loaderoptionsplugin-context">LoaderOptionsPlugin context</a></li><li class="sidebar-item__anchor" title="debug"><a href="/migrate/3/#debug">debug</a></li><li class="sidebar-item__anchor" title="Code Splitting with ES2015"><a href="/migrate/3/#code-splitting-with-es2015">Code Splitting with ES2015</a></li><li class="sidebar-item__anchor" title="Dynamic expressions"><a href="/migrate/3/#dynamic-expressions">Dynamic expressions</a></li><li class="sidebar-item__anchor" title="Mixing ES2015 with AMD and CommonJS"><a href="/migrate/3/#mixing-es2015-with-amd-and-commonjs">Mixing ES2015 with AMD and CommonJS</a></li><li class="sidebar-item__anchor" title="Hints"><a href="/migrate/3/#hints">Hints</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Template strings"><a href="/migrate/3/#template-strings">Template strings</a></li><li class="sidebar-item__anchor" title="Configuration Promise"><a href="/migrate/3/#configuration-promise">Configuration Promise</a></li><li class="sidebar-item__anchor" title="Advanced loader matching"><a href="/migrate/3/#advanced-loader-matching">Advanced loader matching</a></li><li class="sidebar-item__anchor" title="More CLI options"><a href="/migrate/3/#more-cli-options">More CLI options</a></li></ul></li><li class="sidebar-item__anchor" title="Loader changes"><a href="/migrate/3/#loader-changes">Loader changes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Cacheable"><a href="/migrate/3/#cacheable">Cacheable</a></li><li class="sidebar-item__anchor" title="Complex options"><a href="/migrate/3/#complex-options">Complex options</a></li></ul></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="https://v4.webpack.docschina.org">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/migrate/printable.md">查看原文<i class="page-links__icon icon-edit"></i></a><a class="page-links__link" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/migrate/printable.md">编辑此页<i class="page-links__icon icon-link"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">打印文档<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Printable</h1><div><h1 id="migrate">Migrate<a href="#migrate" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>This section contains information about migrating from older versions of webpack to newer ones.</p>
<h1 id="从-v4-升级到-v5">从 v4 升级到 v5<a href="#%E4%BB%8E-v4-%E5%8D%87%E7%BA%A7%E5%88%B0-v5" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>本指南目标是帮助你在使用webpack的时候直接迁移到 webpack 5。如果你使用更高层次的运行webpack的工具，请
参考工具有关迁移的指引。</p>
<h2 id="准备工作">准备工作<a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>webpack 5 要求至少 Node.js 10.13.0 (LTS)。</p>
<blockquote class="tip">
<p>使用更新的 Node.js 版本能够改善构建性能。</p>
</blockquote>
<h3 id="升级-webpack-以及它的依赖">升级 webpack 以及它的依赖<a href="#%E5%8D%87%E7%BA%A7-webpack-%E4%BB%A5%E5%8F%8A%E5%AE%83%E7%9A%84%E4%BE%9D%E8%B5%96" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<h4 id="将-webpack-5-升级到最新的可用版本">将 webpack 5 升级到最新的可用版本<a href="#%E5%B0%86-webpack-5-%E5%8D%87%E7%BA%A7%E5%88%B0%E6%9C%80%E6%96%B0%E7%9A%84%E5%8F%AF%E7%94%A8%E7%89%88%E6%9C%AC" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>当使用 webpack >= 4 的版本, 升级到最新的 webpack 4 版本不需要额外的指南。
如果你使用低于 4 的 webpack 版本，请参考 <a href="/migrate/4/">webpack 4 迁移指南</a>。</p>
<h4 id="将-webpack-cli-升级到最新的可用版本-当有使用的时候">将 webpack-cli 升级到最新的可用版本 (当有使用的时候)<a href="#%E5%B0%86-webpack-cli-%E5%8D%87%E7%BA%A7%E5%88%B0%E6%9C%80%E6%96%B0%E7%9A%84%E5%8F%AF%E7%94%A8%E7%89%88%E6%9C%AC-%E5%BD%93%E6%9C%89%E4%BD%BF%E7%94%A8%E7%9A%84%E6%97%B6%E5%80%99" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<h4 id="将所有使用的插件与加载器升级到最新的可用版本">将所有使用的插件与加载器升级到最新的可用版本<a href="#%E5%B0%86%E6%89%80%E6%9C%89%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8F%92%E4%BB%B6%E4%B8%8E%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8D%87%E7%BA%A7%E5%88%B0%E6%9C%80%E6%96%B0%E7%9A%84%E5%8F%AF%E7%94%A8%E7%89%88%E6%9C%AC" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>有些插件和加载器可能有一个 beta 版本，必须被使用以适配 webpack5。</p>
<blockquote class="warning">
<p>当你升级到重大版本的时候，请参考相关插件与加载器迁移指南。</p>
</blockquote>
<blockquote class="warning">
<p> ExtendedAPIPlugin 已经被去除，它的逻辑已经被整合到 <a href="https://github.com/webpack/webpack/blob/master/lib/APIPlugin.js"><code>APIPlugin</code></a>当中。</p>
</blockquote>
<h4 id="确保你的构建没有错误与警告">确保你的构建没有错误与警告<a href="#%E7%A1%AE%E4%BF%9D%E4%BD%A0%E7%9A%84%E6%9E%84%E5%BB%BA%E6%B2%A1%E6%9C%89%E9%94%99%E8%AF%AF%E4%B8%8E%E8%AD%A6%E5%91%8A" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>这可能有新的错误与警告，是由于 webpack, webpack-cli，插件与加载器的升级版本。
请关注构建中的废弃警告。</p>
<p>你可以像如下的办法调用你的 webpack 以获取废弃告警的栈堆叠追踪并推断出是由哪个插件或加载器引起的。</p>
<pre><code class="hljs language-bash">node --trace-deprecation node_modules/webpack/bin/webpack.js</code></pre>
<blockquote class="warning">
<p>webpack 5 会清除所有废弃的特性。为了继续推进，应该在构建中再无任何的废弃警告。</p>
</blockquote>
<h4 id="make-sure-you-are-using-entry-point-information-from-stats">Make sure you are using entry point information from stats<a href="#make-sure-you-are-using-entry-point-information-from-stats" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<blockquote class="tip">
<p>如果你正使用 <a href="/plugins/html-webpack-plugin/">HtmlWebpackPlugin</a> ，可跳过该步骤。</p>
</blockquote>
<p>当使用静态 HTML 或通过其它的方式生成 HTML，请确保使用从 stats JSON 拿到的 入口文件，以生成 <code>&#x3C;script></code>, <code>&#x3C;style></code> 和
<code>&#x3C;link></code> 标签。</p>
<p>如果这不可行，请避免在本指南后面设置 <code>splitChunks.chunks: 'all'</code> 和 <code>splitChunks.maxSize</code>。注意这是次优的方案
和应通的办法。</p>
<h4 id="请确保使用-mode">请确保使用 <code>mode</code><a href="#%E8%AF%B7%E7%A1%AE%E4%BF%9D%E4%BD%BF%E7%94%A8-mode" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>将 mode  设置成 <a href="/configuration/mode/#mode-production"><code>production</code></a> 或 <a href="/configuration/mode/#mode-development"><code>development</code></a> 以确保
相应的默认值被设置。</p>
<h4 id="升级废弃的配置">升级废弃的配置<a href="#%E5%8D%87%E7%BA%A7%E5%BA%9F%E5%BC%83%E7%9A%84%E9%85%8D%E7%BD%AE" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>将以下的配置升级到最新的版本 (如有使用):</p>
<ul>
<li><code>optimization.hashedModuleIds: true</code> ↦ <code>optimization.moduleIds: 'hashed'</code></li>
<li><code>optimization.namedChunks: true</code> ↦ <code>optimization.chunkIds: 'named'</code></li>
<li><code>optimization.namedModules: true</code> ↦ <code>optimization.moduleIds: 'named'</code></li>
<li><code>NamedModulesPlugin</code> ↦ <code>optimization.moduleIds: 'named'</code></li>
<li><code>NamedChunksPlugin</code> ↦ <code>optimization.chunkIds: 'named'</code></li>
<li><code>HashedModulesPlugin</code> ↦ <code>optimization.moduleIds: 'hashed'</code></li>
<li><code>optimization.occurrenceOrder: true</code> ↦ <code>optimization: { chunkIds: 'total-size', moduleIds: 'size' }</code></li>
<li><code>optimization.splitChunks.cacheGroups.vendors</code> ↦ <code>optimization.splitChunks.cacheGroups.defaultVendors</code></li>
<li><code>Compilation.entries</code> ↦ <code>Compilation.entryDependencies</code></li>
<li><code>serve</code> ↦ <code>serve</code> 已被去掉，推荐使用 <a href="/configuration/dev-server/"><code>DevServer</code></a></li>
</ul>
<h4 id="测试-webpack-5-兼容性">测试 webpack 5 兼容性<a href="#%E6%B5%8B%E8%AF%95-webpack-5-%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>尝试在你的 webpack 4 中设置如下的配置，检查一下构建是否仍然正确的运行。</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  node<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Buffer<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    process<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p>webpack 5 去掉了这些配置的的模式并且会永远设置成 <code>false</code>。你必须要再次去掉这些配置当
你将配置升级到 webpack 5。</p>
</blockquote>
<h4 id="升级-webpack-版本">升级 webpack 版本<a href="#%E5%8D%87%E7%BA%A7-webpack-%E7%89%88%E6%9C%AC" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>npm: <code>npm install webpack@next --dev</code></p>
<p>Yarn: <code>yarn add webpack@next -D</code></p>
<h4 id="清理配置">清理配置<a href="#%E6%B8%85%E7%90%86%E9%85%8D%E7%BD%AE" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<ul>
<li>请考虑将 <code>optimization.moduleIds</code> 和 <code>optimization.chunkIds</code> 从你的 webpack 配置中清楚。使用默认值会更好，因为它们会在 <a href="/configuration/mode/#mode-production"><code>production 模式</code></a> 下支持长期缓存和在<a href="/configuration/mode/#mode-development"><code>development</code> 模式</a>
下能进行调试。</li>
<li>当在 webpack 配置中使用 <code>[hash]</code> 占位符时，请考虑将它改为 <code>[contenthash]</code>。它并不一样，但被证实更为
有效。</li>
<li>当你使用 Yarn 的 PnP 和 <code>pnp-webpack-plugin</code> 插件，好消息来了：它现在被默认支持了。你可以
从配置中去除。</li>
<li>如果你使用 <code>IgnorePlugin</code> 并带上一个正则表达式作用参数，它现在接受一个 <code>options</code> 对象：
<code>new IgnorePlugin({ resourceRegExp: /regExp/ })</code>。</li>
</ul>
<p>如果你通过 import 使用 WASM，你应该跟着以下两个步骤：</p>
<ul>
<li>通过设置 <code>experiments.syncWebAssembly: true</code> 启动废弃细则，获得在 webpack 4 中的相同行为。</li>
<li>在成功升级到 webpack 5 后，将  <code>experiments</code> 的值改为 <code>experiments: { asyncWebAssembly: true, importAsync: true }</code> 以使用
更新 WASM 融合细则。</li>
</ul>
<p>重新思考 <code>optimization.splitChunks</code>:</p>
<ul>
<li>推荐使用默认配置或<code>optimization.splitChunks: { chunks: 'all' }</code>。</li>
<li>当使用 HTTP/2 和长期缓存，设置
<code>optimization.splitChunks: { chunks: 'all', maxInitialRequests: 30, maxAsyncRequests: 30, maxSize: 100000 }</code>。</li>
<li>当使用自定义配置，将 <code>name</code> 替换为 <code>idHint</code>。</li>
<li>通过设置 <code>optimization.splitChunks: { default: false, vendors: false }</code> 是可以关闭默认值的。我们不推荐
这么做，但如果你真的想在 webpack 5 中获得相同的效果：设置 <code>optimization.splitChunks: { default: false, defaultVendors: false }</code>。</li>
</ul>
<h4 id="清理代码">清理代码<a href="#%E6%B8%85%E7%90%86%E4%BB%A3%E7%A0%81" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>使用 <code>/* webpackChunkName: '...' */</code>：确定你明白其含义：</p>
<ul>
<li>文件束 (chunk) 的名字在这里本意是公共的。</li>
<li>它不是一个仅用于开发模式的名字。</li>
<li>webpack 会在生成与开发模式中使用它对文件进行命名。</li>
<li>webpack 5 会自动在 <code>development</code> 模式下，分配有意义的文件名，即使不使用 <code>webpackChunkName</code>。</li>
</ul>
<p>使用从 JSON 模块的命名导出：新的规范已经不再支持所以你们得到一个警告。请使用 <code>import package from './package.json'; const { version } = package;</code>
而不是 <code>import { version } from './package.json'</code>。</p>
<h4 id="清理构建代码">清理构建代码<a href="#%E6%B8%85%E7%90%86%E6%9E%84%E5%BB%BA%E4%BB%A3%E7%A0%81" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<ul>
<li>当使用  <code>const compiler = webpack(...);</code>，确保在你使用后用 <code>compiler.close();</code> 关闭编译器。</li>
</ul>
<h4 id="运行单个构建并跟随以下的建议">运行单个构建并跟随以下的建议<a href="#%E8%BF%90%E8%A1%8C%E5%8D%95%E4%B8%AA%E6%9E%84%E5%BB%BA%E5%B9%B6%E8%B7%9F%E9%9A%8F%E4%BB%A5%E4%B8%8B%E7%9A%84%E5%BB%BA%E8%AE%AE" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>如果没有相关的建议？请创建一个议题(issue)，我们会尝试解决它。重复以下的步骤，直到你至少解决到3或4层次：</p>
<ul>
<li>层次 1: 模式（Schema）校验失败。配置选项已经改变。它应该要有一个校验失败的信息且带上 <code>重大更新（BREAKING CHANGE）:</code> 提示。</li>
<li>层次 2: webpack 退出错误。错误信息应该告诉你哪些需要被更改的。</li>
<li>层次 3: 构建错误。错误信息应该要有一个 <code>重大更新（BREAKING CHANGE）:</code> 提示。</li>
<li>层次 4: 构建警告。警告信息应该告诉你有哪些需要改进的。</li>
</ul>
<p>废弃警告。你可能会得到许多废弃的警告。目前这不需要是一个问题。插件需要时间跟上webpack内核的
改变。请忽略这些警告直到发布候选版本推出而不再是Beta版本。</p>
<ul>
<li>你使用 <code>--no-deprecation</code> 标志运行 node 进行，可以隐藏废弃告警，例如：<code>node --no-deprecation node_modules/webpack/bin/webpack.js</code>。
这只能作为一个临时的变通方案。</li>
<li>插件和加载器贡献者，应该跟随废弃建议信息以改进代码。</li>
</ul>
<h4 id="如有需要，在运行时代码中禁用-es2015-语法">如有需要，在运行时代码中禁用 ES2015 语法<a href="#%E5%A6%82%E6%9C%89%E9%9C%80%E8%A6%81%EF%BC%8C%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%A6%81%E7%94%A8-es2015-%E8%AF%AD%E6%B3%95" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>默认地，webpack 的运行时代码会使用 ES2015语法以使构建出来的包体积更小。如果你构建的目标环境中不支持这种语法（比如 IE11），你需要设置 <code>output.ecmaVersion: 5</code> 以将代码转换为 ES5 语法。</p>
<h4 id="所有情况都运行如常？">所有情况都运行如常？<a href="#%E6%89%80%E6%9C%89%E6%83%85%E5%86%B5%E9%83%BD%E8%BF%90%E8%A1%8C%E5%A6%82%E5%B8%B8%EF%BC%9F" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>请发一个推特如果你成功地迁移到 webpack 5.<a href="https://twitter.com/intent/tweet?source=https://webpack.js.org/migrate/5/&#x26;text=I%20just%20migrated%20to%20webpack%205%20using%20its%20migration%20guide!%20&#x26;via=webpack&#x26;hashtags=webpack,webpack5">发一个推特</a></p>
<h4 id="运行异常？">运行异常？<a href="#%E8%BF%90%E8%A1%8C%E5%BC%82%E5%B8%B8%EF%BC%9F" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>创建一个 <a href="https://github.com/webpack/webpack/issues/new?template=Bug_report.md">议题（issue）</a> 并告诉我们
在迁移过程中你遇到的问题。</p>
<h4 id="有一些在本指南中缺失的东西？">有一些在本指南中缺失的东西？<a href="#%E6%9C%89%E4%B8%80%E4%BA%9B%E5%9C%A8%E6%9C%AC%E6%8C%87%E5%8D%97%E4%B8%AD%E7%BC%BA%E5%A4%B1%E7%9A%84%E4%B8%9C%E8%A5%BF%EF%BC%9F" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>请打开一个 Pull Request 以帮助后面的开发者使用该指南。</p>
<h2 id="内核的改变">内核的改变<a href="#%E5%86%85%E6%A0%B8%E7%9A%84%E6%94%B9%E5%8F%98" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>webpack 内核的改变有：添加类型，代码重构和方法重命令都在这里列出来，供那些有兴趣的开发者。但这些
本并不被作为通用迁移使用案例的一部份。</p>
<ul>
<li><code>Module.nameForCondition</code>, <code>Module.updateCacheModule</code> 和 <code>Module.chunkCondition</code> 不再是可选的。</li>
</ul>
<h3 id="加载器的-getoptions-方法">加载器的 getOptions 方法<a href="#%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84-getoptions-%E6%96%B9%E6%B3%95" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack 5 发布后，在加载器上下文中，带有内置的 <a href="/api/loaders/#thisgetoptionsschema"><code>this.getOptions</code></a> 方法。这对于那些已经使用来自之前推荐的 <a href="https://github.com/webpack/schema-utils">schema-utils</a> 的 <code>getOptions</code> 方法的加载器而言是重大的重新：</p>
<ul>
<li><code>this.getOptions</code> 自 webpack 5 起可使用</li>
<li>它支持 JSON 作为一个查询字符串：如 <code>?{arg:true}</code> ↦ <code>?{"arg":true}</code> 而不仅是 JSON5。在相应的加载器文件中，
使用 JSON5 应该被认为且被写在文档中是已废弃的并推荐使用 JSON。</li>
<li><a href="https://github.com/webpack/loader-utils"><code>loader-utils</code></a> 有特定的解析查询字符串的行为（<code>true</code>, <code>false</code> 和 <code>null</code> 不会被解析成 <code>字符串</code>而是一个原始值）。
这对于新的内置 <code>this.getOptions</code> 方法来说，不再适用，它使用原生的 <a href="https://nodejs.org/api/querystring.html"><code>querystring</code></a> 方法 （与 Node.js一同发布）进行解析。在这些情况下在加载器中使用 <code>this.getOptions</code> 获取配置选项之后，
添加自定义行为仍然可行。</li>
<li>模式(Schema) 参数对新的 <code>this.getOptions</code> 方法而言是可选的，但我们强烈建议给你的加载器选项添加模式校验。
在模式中的 <code>title</code> 字段，可用作自定义校验的错误信息，比如  <code>"title": "My Loader ooooptions"</code>  会引致
这种方式的错误展示：<code>Invalid ooooptions object. My Loader has been initialised using an ooooptions object that does not match the API schema. - ooooptions.foo.bar.baz should be a string.</code>。</li>
</ul>
<h1 id="to-v4-from-v3">To v4 from v3<a href="#to-v4-from-v3" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>This guide only shows major changes that affect end users. For more details please see <a href="https://github.com/webpack/webpack/releases">the changelog</a>.</p>
<h2 id="nodejs-v4">Node.js v4<a href="#nodejs-v4" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>If you are still using Node.js v4 or lower, you need to upgrade your Node.js installation to Node.js v6 or higher.</p>
<p>Instructions for upgrading your Node.js version can be found <a href="https://stackoverflow.com/questions/10075990/upgrading-node-js-to-latest-version">here</a>.</p>
<h2 id="cli">CLI<a href="#cli" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The CLI has moved to a separate package: webpack-cli. You need to install it before using webpack, see <a href="/guides/getting-started/#basic-setup">basic setup</a>.</p>
<p>The installation guide can be found <a href="/guides/installation">here</a>.</p>
<h2 id="update-plugins">Update plugins<a href="#update-plugins" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Many 3rd party plugins need to be updated to the latest versions to be compatible with webpack 4. Links to popular plugins can be found <a href="https://github.com/webpack-contrib/awesome-webpack#webpack-plugins">here</a>.</p>
<h2 id="mode">mode<a href="#mode" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Add the new <a href="/configuration/mode/"><code>mode</code></a> option to your configuration. Set it to <code>'production'</code>, <code>'development'</code> or <code>'none'</code> depending on your configuration type.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
  // ...
<span class="token inserted">+  mode: 'production',</span>
}</code></pre>
<blockquote class="tip">
<p>The purpose of <code>'development'</code> mode and <code>'production'</code> mode is different. You can use <code>webpack-merge</code> as shown in <a href="/guides/production/#setup">production guide</a> to optimize configurations.</p>
</blockquote>
<h2 id="deprecatedremoved-plugins">Deprecated/Removed plugins<a href="#deprecatedremoved-plugins" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>These plugins can be removed from configuration as they are default in production mode:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
  // ...
  plugins: [
<span class="token deleted">-    new NoEmitOnErrorsPlugin(),</span>
<span class="token deleted">-    new ModuleConcatenationPlugin(),</span>
<span class="token deleted">-    new DefinePlugin({ "process.env.NODE_ENV": JSON.stringify("production") })</span>
<span class="token deleted">-    new UglifyJsPlugin()</span>
  ],
}</code></pre>
<p>These plugins are default in development mode</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
  // ...
  plugins: [
<span class="token deleted">-    new NamedModulesPlugin()</span>
  ],
}</code></pre>
<p>These plugins were deprecated and are now removed:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
  // ...
  plugins: [
<span class="token deleted">-    new NoErrorsPlugin(),</span>
<span class="token deleted">-    new NewWatchingPlugin()</span>
  ],
}</code></pre>
<h2 id="commonschunkplugin">CommonsChunkPlugin<a href="#commonschunkplugin" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>CommonsChunkPlugin</code> was removed. Instead the <a href="/configuration/optimization/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> options can be used.</p>
<p>See documentation of the <a href="/configuration/optimization/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> for more details. The default configuration may already suit your needs.</p>
<blockquote class="tip">
<p>When generating the HTML from the stats you can use <code>optimization.splitChunks.chunks: "all"</code> which is the optimal configuration in most cases.</p>
</blockquote>
<h2 id="import-and-commonjs">import() and CommonJS<a href="#import-and-commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When using <code>import()</code> to load non-ESM the result has changed in webpack 4. Now you need to access the <code>default</code> property to get the value of <code>module.exports</code>.</p>
<p><strong>non-esm.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  sayHello<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>example.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./non-esm.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>module <span class="token operator">=></span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="json-and-loaders">json and loaders<a href="#json-and-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When using a custom loader to transform <code>.json</code> files you now need to change the module <code>type</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
  // ...
  rules: [
    {
      test: /config\.json$/,
      loader: 'special-loader',
<span class="token inserted">+     type: 'javascript/auto',</span>
      options: {...}
    }
  ]
};</code></pre>
<p>When still using the <code>json-loader</code>, it can be removed:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
  // ...
  rules: [
    {
<span class="token deleted">-     test: /\.json$/,</span>
<span class="token deleted">-     loader: 'json-loader'</span>
    }
  ]
};</code></pre>
<h2 id="moduleloaders">module.loaders<a href="#moduleloaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>module.loaders</code> were deprecated since webpack 2 and are now removed in favor of <a href="/configuration/module/#rule"><code>module.rules</code></a>.</p>
<h1 id="to-v2-or-v3-from-v1">To v2 or v3 from v1<a href="#to-v2-or-v3-from-v1" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>The following sections describe the major changes from webpack 1 to 2.</p>
<blockquote class="tip">
<p>Note that there were far fewer changes between 2 and 3, so that migration shouldn't be too bad. If you are running into issues, please see <a href="https://github.com/webpack/webpack/releases">the changelog</a> for details.</p>
</blockquote>
<h2 id="resolveroot-resolvefallback-resolvemodulesdirectories"><code>resolve.root</code>, <code>resolve.fallback</code>, <code>resolve.modulesDirectories</code><a href="#resolveroot-resolvefallback-resolvemodulesdirectories" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>These options were replaced by a single option <code>resolve.modules</code>. See <a href="/configuration/resolve">resolving</a> for more usage.</p>
<pre><code class="hljs language-diff">  resolve: {
<span class="token deleted">-   root: path.join(__dirname, "src")</span>
<span class="token inserted">+   modules: [</span>
<span class="token inserted">+     path.join(__dirname, "src"),</span>
<span class="token inserted">+     "node_modules"</span>
<span class="token inserted">+   ]</span>
  }</code></pre>
<h2 id="resolveextensions"><code>resolve.extensions</code><a href="#resolveextensions" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>This option no longer requires passing an empty string. This behavior was moved to <code>resolve.enforceExtension</code>. See <a href="/configuration/resolve">resolving</a> for more usage.</p>
<h2 id="resolve"><code>resolve.*</code><a href="#resolve" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Several APIs were changed here. Not listed in detail as it's not commonly used. See <a href="/configuration/resolve">resolving</a> for details.</p>
<h2 id="moduleloaders-is-now-modulerules"><code>module.loaders</code> is now <code>module.rules</code><a href="#moduleloaders-is-now-modulerules" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The old loader configuration was superseded by a more powerful rules system, which allows configuration of loaders and more.
For compatibility reasons, the old <code>module.loaders</code> syntax is still valid and the old names are parsed.
The new naming conventions are easier to understand and are a good reason to upgrade the configuration to using <code>module.rules</code>.</p>
<pre><code class="hljs language-diff">  module: {
<span class="token deleted">-   loaders: [</span>
<span class="token inserted">+   rules: [</span>
      {
        test: /\.css$/,
<span class="token deleted">-       loaders: [</span>
<span class="token deleted">-         "style-loader",</span>
<span class="token deleted">-         "css-loader?modules=true"</span>
<span class="token inserted">+       use: [</span>
<span class="token inserted">+         {</span>
<span class="token inserted">+           loader: "style-loader"</span>
<span class="token inserted">+         },</span>
<span class="token inserted">+         {</span>
<span class="token inserted">+           loader: "css-loader",</span>
<span class="token inserted">+           options: {</span>
<span class="token inserted">+             modules: true</span>
<span class="token inserted">+           }</span>
<span class="token inserted">+         }</span>
        ]
      },
      {
        test: /\.jsx$/,
        loader: "babel-loader", // Do not use "use" here
        options: {
          // ...
        }
      }
    ]
  }</code></pre>
<h2 id="chaining-loaders">Chaining loaders<a href="#chaining-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Like in webpack 1, loaders can be chained to pass results from loader to loader. Using the <a href="/configuration/module/#ruleuse">rule.use</a>
configuration option, <code>use</code> can be set to an array of loaders.
In webpack 1, loaders were commonly chained with <code>!</code>. This style is only supported using the legacy option <code>module.loaders</code>.</p>
<pre><code class="hljs language-diff">  module: {
<span class="token deleted">-   loaders: [{</span>
<span class="token inserted">+   rules: [{</span>
      test: /\.less$/,
<span class="token deleted">-     loader: "style-loader!css-loader!less-loader"</span>
<span class="token inserted">+     use: [</span>
<span class="token inserted">+       "style-loader",</span>
<span class="token inserted">+       "css-loader",</span>
<span class="token inserted">+       "less-loader"</span>
<span class="token inserted">+     ]</span>
    }]
  }</code></pre>
<h2 id="automatic--loader-module-name-extension-removed">Automatic <code>-loader</code> module name extension removed<a href="#automatic--loader-module-name-extension-removed" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>It is not possible anymore to omit the <code>-loader</code> extension when referencing loaders:</p>
<pre><code class="hljs language-diff">  module: {
    rules: [
      {
        use: [
<span class="token deleted">-         "style",</span>
<span class="token inserted">+         "style-loader",</span>
<span class="token deleted">-         "css",</span>
<span class="token inserted">+         "css-loader",</span>
<span class="token deleted">-         "less",</span>
<span class="token inserted">+         "less-loader",</span>
        ]
      }
    ]
  }</code></pre>
<p>You can still opt-in to the old behavior with the <code>resolveLoader.moduleExtensions</code> configuration option, but this is not recommended.</p>
<pre><code class="hljs language-diff"><span class="token inserted">+ resolveLoader: {</span>
<span class="token inserted">+   moduleExtensions: ["-loader"]</span>
<span class="token inserted">+ }</span></code></pre>
<p>See <a href="https://github.com/webpack/webpack/issues/2986">#2986</a> for the reason behind this change.</p>
<h2 id="json-loader-is-not-required-anymore"><code>json-loader</code> is not required anymore<a href="#json-loader-is-not-required-anymore" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When no loader has been configured for a JSON file, webpack will automatically try to load the JSON
file with the <a href="https://github.com/webpack-contrib/json-loader"><code>json-loader</code></a>.</p>
<pre><code class="hljs language-diff">  module: {
    rules: [
<span class="token deleted">-     {</span>
<span class="token deleted">-       test: /\.json/,</span>
<span class="token deleted">-       loader: "json-loader"</span>
<span class="token deleted">-     }</span>
    ]
  }</code></pre>
<p><a href="https://github.com/webpack/webpack/issues/3363">We decided to do this</a> in order to iron out environment differences
between webpack, node.js and browserify.</p>
<h2 id="loaders-in-configuration-resolve-relative-to-context">Loaders in configuration resolve relative to context<a href="#loaders-in-configuration-resolve-relative-to-context" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In <strong>webpack 1</strong>, configured loaders resolve relative to the matched file. However, in <strong>webpack 2</strong>, configured loaders resolve relative to the <code>context</code> option.</p>
<p>This solves some problems with duplicate modules caused by loaders when using <code>npm link</code> or referencing modules outside of the <code>context</code>.</p>
<p>You may remove some hacks to work around this:</p>
<pre><code class="hljs language-diff">  module: {
    rules: [
      {
        // ...
<span class="token deleted">-       loader: require.resolve("my-loader")</span>
<span class="token inserted">+       loader: "my-loader"</span>
      }
    ]
  },
  resolveLoader: {
<span class="token deleted">-   root: path.resolve(__dirname, "node_modules")</span>
  }</code></pre>
<h2 id="modulepreloaders-and-modulepostloaders-were-removed"><code>module.preLoaders</code> and <code>module.postLoaders</code> were removed:<a href="#modulepreloaders-and-modulepostloaders-were-removed" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<pre><code class="hljs language-diff">  module: {
<span class="token deleted">-   preLoaders: [</span>
<span class="token inserted">+   rules: [</span>
      {
        test: /\.js$/,
<span class="token inserted">+       enforce: "pre",</span>
        loader: "eslint-loader"
      }
    ]
  }</code></pre>
<h2 id="uglifyjsplugin-sourcemap"><code>UglifyJsPlugin</code> sourceMap<a href="#uglifyjsplugin-sourcemap" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>sourceMap</code> option of the <code>UglifyJsPlugin</code> now defaults to <code>false</code> instead of <code>true</code>. This means that if you are using source maps for minimized code or want correct line numbers for uglifyjs warnings, you need to set <code>sourceMap: true</code> for <code>UglifyJsPlugin</code>.</p>
<pre><code class="hljs language-diff">  devtool: "source-map",
  plugins: [
    new UglifyJsPlugin({
<span class="token inserted">+     sourceMap: true</span>
    })
  ]</code></pre>
<h2 id="uglifyjsplugin-warnings"><code>UglifyJsPlugin</code> warnings<a href="#uglifyjsplugin-warnings" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>compress.warnings</code> option of the <code>UglifyJsPlugin</code> now defaults to <code>false</code> instead of <code>true</code>.
This means that if you want to see uglifyjs warnings, you need to set <code>compress.warnings</code> to <code>true</code>.</p>
<pre><code class="hljs language-diff">  devtool: "source-map",
  plugins: [
    new UglifyJsPlugin({
<span class="token inserted">+     compress: {</span>
<span class="token inserted">+       warnings: true</span>
<span class="token inserted">+     }</span>
    })
  ]</code></pre>
<h2 id="uglifyjsplugin-minimize-loaders"><code>UglifyJsPlugin</code> minimize loaders<a href="#uglifyjsplugin-minimize-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>UglifyJsPlugin</code> no longer switches loaders into minimize mode. The <code>minimize: true</code> setting needs to be passed via loader options in the long-term. See loader documentation for relevant options.</p>
<p>The minimize mode for loaders will be removed in webpack 3 or later.</p>
<p>To keep compatibility with old loaders, loaders can be switched to minimize mode via plugin:</p>
<pre><code class="hljs language-diff">  plugins: [
<span class="token inserted">+   new webpack.LoaderOptionsPlugin({</span>
<span class="token inserted">+     minimize: true</span>
<span class="token inserted">+   })</span>
  ]</code></pre>
<h2 id="dedupeplugin-has-been-removed"><code>DedupePlugin</code> has been removed<a href="#dedupeplugin-has-been-removed" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>webpack.optimize.DedupePlugin</code> isn't needed anymore. Remove it from your configuration.</p>
<h2 id="bannerplugin---breaking-change"><code>BannerPlugin</code> - breaking change<a href="#bannerplugin---breaking-change" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>BannerPlugin</code> no longer accepts two parameters, but a single options object.</p>
<pre><code class="hljs language-diff">  plugins: [
<span class="token deleted">-    new webpack.BannerPlugin('Banner', {raw: true, entryOnly: true});</span>
<span class="token inserted">+    new webpack.BannerPlugin({banner: 'Banner', raw: true, entryOnly: true});</span>
  ]</code></pre>
<h2 id="occurrenceorderplugin-is-now-on-by-default"><code>OccurrenceOrderPlugin</code> is now on by default<a href="#occurrenceorderplugin-is-now-on-by-default" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>OccurrenceOrderPlugin</code> is now enabled by default and has been renamed (<code>OccurenceOrderPlugin</code> in webpack 1).
Thus make sure to remove the plugin from your configuration:</p>
<pre><code class="hljs language-diff">  plugins: [
    // webpack 1
<span class="token deleted">-   new webpack.optimize.OccurenceOrderPlugin()</span>
    // webpack 2
<span class="token deleted">-   new webpack.optimize.OccurrenceOrderPlugin()</span>
  ]</code></pre>
<h2 id="extracttextwebpackplugin---breaking-change"><code>ExtractTextWebpackPlugin</code> - breaking change<a href="#extracttextwebpackplugin---breaking-change" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><a href="https://github.com/webpack-contrib/extract-text-webpack-plugin">ExtractTextPlugin</a> requires version 2 to work with webpack 2.</p>
<p><code>npm install --save-dev extract-text-webpack-plugin</code></p>
<p>The configuration changes for this plugin are mainly syntactical.</p>
<h3 id="extracttextpluginextract"><code>ExtractTextPlugin.extract</code><a href="#extracttextpluginextract" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-diff">module: {
  rules: [
    {
      test: /.css$/,
<span class="token deleted">-      loader: ExtractTextPlugin.extract("style-loader", "css-loader", { publicPath: "/dist" })</span>
<span class="token inserted">+      use: ExtractTextPlugin.extract({</span>
<span class="token inserted">+        fallback: "style-loader",</span>
<span class="token inserted">+        use: "css-loader",</span>
<span class="token inserted">+        publicPath: "/dist"</span>
<span class="token inserted">+      })</span>
    }
  ]
}</code></pre>
<h3 id="new-extracttextpluginoptions"><code>new ExtractTextPlugin({options})</code><a href="#new-extracttextpluginoptions" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-diff">plugins: [
<span class="token deleted">-  new ExtractTextPlugin("bundle.css", { allChunks: true, disable: false })</span>
<span class="token inserted">+  new ExtractTextPlugin({</span>
<span class="token inserted">+    filename: "bundle.css",</span>
<span class="token inserted">+    disable: false,</span>
<span class="token inserted">+    allChunks: true</span>
<span class="token inserted">+  })</span>
]</code></pre>
<h2 id="full-dynamic-requires-now-fail-by-default">Full dynamic requires now fail by default<a href="#full-dynamic-requires-now-fail-by-default" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A dependency with only an expression (i. e. <code>require(expr)</code>) will now create an empty context instead of the context of the complete directory.</p>
<p>Code like this should be refactored as it won't work with ES2015 modules. If this is not possible you can use the <code>ContextReplacementPlugin</code> to hint the compiler towards the correct resolving.</p>
<blockquote class="todo">
<p>Link to an article about dynamic dependencies.</p>
</blockquote>
<h3 id="using-custom-arguments-in-cli-and-configuration">Using custom arguments in CLI and configuration<a href="#using-custom-arguments-in-cli-and-configuration" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>If you abused the CLI to pass custom arguments to the configuration like so:</p>
<p><code>webpack --custom-stuff</code></p>
<pre><code class="hljs language-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">var</span> customStuff <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'--custom-stuff'</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">/* ... */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></code></pre>
<p>You may notice that this is no longer allowed. The CLI is more strict now.</p>
<p>Instead there is an interface for passing arguments to the configuration. This should be used instead. Future tools may rely on this.</p>
<p><code>webpack --env.customStuff</code></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> customStuff <span class="token operator">=</span> env<span class="token punctuation">.</span>customStuff<span class="token punctuation">;</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>See <a href="/api/cli">CLI</a>.</p>
<h2 id="requireensure-and-amd-require-are-asynchronous"><code>require.ensure</code> and AMD <code>require</code> are asynchronous<a href="#requireensure-and-amd-require-are-asynchronous" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>These functions are now always asynchronous instead of calling their callback synchronously if the chunk is already loaded.</p>
<p><strong><code>require.ensure</code> now depends upon native <code>Promise</code>s. If using <code>require.ensure</code> in an environment that lacks them then you will need a polyfill.</strong></p>
<h2 id="loader-configuration-is-through-options">Loader configuration is through <code>options</code><a href="#loader-configuration-is-through-options" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>You can <em>no longer</em> configure a loader with a custom property in the <code>webpack.config.js</code>. It must be done through the <code>options</code>. The following configuration with the <code>ts</code> property is no longer valid with webpack 2:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// does not work with webpack 2</span>
  ts<span class="token punctuation">:</span> <span class="token punctuation">{</span> transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="what-are-options">What are <code>options</code>?<a href="#what-are-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Good question. Well, strictly speaking it's 2 possible things; both ways to configure a webpack loader. Classically <code>options</code> was called <code>query</code> and was a string which could be appended to the name of the loader. Much like a query string but actually with <a href="https://github.com/webpack/loader-utils#parsequery">greater powers</a>:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader?'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>But it can also be a separately specified object that's supplied alongside a loader:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span>  <span class="token punctuation">{</span> transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="loaderoptionsplugin-context"><code>LoaderOptionsPlugin</code> context<a href="#loaderoptionsplugin-context" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Some loaders need context information and read them from the configuration. This needs to be passed via loader options in the long-term. See loader documentation for relevant options.</p>
<p>To keep compatibility with old loaders, this information can be passed via plugin:</p>
<pre><code class="hljs language-diff">  plugins: [
<span class="token inserted">+   new webpack.LoaderOptionsPlugin({</span>
<span class="token inserted">+     options: {</span>
<span class="token inserted">+       context: __dirname</span>
<span class="token inserted">+     }</span>
<span class="token inserted">+   })</span>
  ]</code></pre>
<h2 id="debug"><code>debug</code><a href="#debug" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>debug</code> option switched loaders to debug mode in webpack 1. This needs to be passed via loader options in long-term. See loader documentation for relevant options.</p>
<p>The debug mode for loaders will be removed in webpack 3 or later.</p>
<p>To keep compatibility with old loaders, loaders can be switched to debug mode via a plugin:</p>
<pre><code class="hljs language-diff"><span class="token deleted">- debug: true,</span>
  plugins: [
<span class="token inserted">+   new webpack.LoaderOptionsPlugin({</span>
<span class="token inserted">+     debug: true</span>
<span class="token inserted">+   })</span>
  ]</code></pre>
<h2 id="code-splitting-with-es2015">Code Splitting with ES2015<a href="#code-splitting-with-es2015" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In webpack 1, you could use <a href="/api/module-methods/#requireensure"><code>require.ensure()</code></a> as a method to lazily-load chunks for your application:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The ES2015 Loader spec defines <a href="/api/module-methods/#import-1"><code>import()</code></a> as method to load ES2015 Modules dynamically on runtime. webpack treats <code>import()</code> as a split-point and puts the requested module in a separate chunk. <code>import()</code> takes the module name as argument and returns a Promise.</p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>module <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Chunk loading failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Good news: Failure to load a chunk can now be handled because they are <code>Promise</code> based.</p>
<h2 id="dynamic-expressions">Dynamic expressions<a href="#dynamic-expressions" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>It's possible to pass a partial expression to <code>import()</code>. This is handled similar to expressions in CommonJS (webpack creates a <a href="/plugins/context-replacement-plugin/">context</a> with all possible files).</p>
<p><code>import()</code> creates a separate chunk for each possible module.</p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">route</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./routes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/route`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>route <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">route<span class="token punctuation">.</span>Route</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// This creates a separate chunk for each possible route</span></code></pre>
<h2 id="mixing-es2015-with-amd-and-commonjs">Mixing ES2015 with AMD and CommonJS<a href="#mixing-es2015-with-amd-and-commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>As for AMD and CommonJS you can freely mix all three module types (even within the same file). webpack behaves similar to babel and node-eps in this case:</p>
<pre><code class="hljs language-javascript"><span class="token comment">// CommonJS consuming ES2015 Module</span>
<span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./book'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

book<span class="token punctuation">.</span>currentPage<span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token function">readPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token keyword">default</span> <span class="token operator">===</span> <span class="token string">'This is a book'</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-javascript"><span class="token comment">// ES2015 Module consuming CommonJS</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span> <span class="token comment">// module.exports map to default</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span> <span class="token comment">// named exports are read from returned object+</span>

<span class="token keyword">typeof</span> fs<span class="token punctuation">.</span>readFileSync <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> readFileSync <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span></code></pre>
<p>It is important to note that you will want to tell Babel to not parse these module symbols so webpack can use them. You can do this by setting the following in your <code>.babelrc</code> or <code>babel-loader</code> options.</p>
<p><strong>.babelrc</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">"es2015"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">"modules"</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="hints">Hints<a href="#hints" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>No need to change something, but opportunities</p>
<h3 id="template-strings">Template strings<a href="#template-strings" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack now supports template strings in expressions. This means you can start using them in webpack constructs:</p>
<pre><code class="hljs language-diff"><span class="token deleted">- require("./templates/" + name);</span>
<span class="token inserted">+ require(`./templates/${name}`);</span></code></pre>
<h3 id="configuration-promise">Configuration Promise<a href="#configuration-promise" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack now supports returning a <code>Promise</code> from the configuration file. This allows async processing in your configuration file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fetchLangs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>lang <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token constant">LANGUAGE</span><span class="token punctuation">:</span> lang <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="advanced-loader-matching">Advanced loader matching<a href="#advanced-loader-matching" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack now supports more things to match on for loaders.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        resource<span class="token punctuation">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// matches "/path/filename.js"</span>
        resourceQuery<span class="token punctuation">:</span> <span class="token regex">/^\?querystring$/</span><span class="token punctuation">,</span> <span class="token comment">// matches "?querystring"</span>
        issuer<span class="token punctuation">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// matches "/path/something.js" if requested from "/path/filename.js"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="more-cli-options">More CLI options<a href="#more-cli-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>There are some new CLI options for you to use:</p>
<p><code>--define process.env.NODE_ENV="production"</code> See <a href="/plugins/define-plugin/"><code>DefinePlugin</code></a>.</p>
<p><code>--display-depth</code> displays the distance to the entry point for each module.</p>
<p><code>--display-used-exports</code> display info about which exports are used in a module.</p>
<p><code>--display-max-modules</code> sets the number for modules displayed in the output (defaults to 15).</p>
<p><code>-p</code> also defines <code>process.env.NODE_ENV</code> to <code>"production"</code> now.</p>
<h2 id="loader-changes">Loader changes<a href="#loader-changes" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Changes only relevant for loader authors.</p>
<h3 id="cacheable">Cacheable<a href="#cacheable" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Loaders are now cacheable by default. Loaders must opt-out if they are not cacheable.</p>
<pre><code class="hljs language-diff">  // Cacheable loader
  module.exports = function(source) {
<span class="token deleted">-   this.cacheable();</span>
    return source;
  }</code></pre>
<pre><code class="hljs language-diff">  // Not cacheable loader
  module.exports = function(source) {
<span class="token inserted">+   this.cacheable(false);</span>
    return source;
  }</code></pre>
<h3 id="complex-options">Complex options<a href="#complex-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><strong>webpack 1</strong> only supports <code>JSON.stringify</code>-able options for loaders.</p>
<p><strong>webpack 2</strong> now supports any JS object as loader options.</p>
<p>Before webpack <a href="https://github.com/webpack/webpack/releases/tag/v2.2.1">2.2.1</a> (i.e. from 2.0.0 through 2.2.0), using complex options required using <code>ident</code> for the <code>options</code> object to allow its reference from other loaders. <strong>This was removed in 2.2.1</strong> and thus current migrations do not require any use of the <code>ident</code> key.</p>
<pre><code class="hljs language-diff">{
  test: /\.ext/
  use: {
    loader: '...',
    options: {
<span class="token deleted">-     ident: 'id',</span>
      fn: () => require('./foo.js')
    }
  }
}</code></pre>
</div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/webpack"><img alt="webpack" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->webpack</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">起步</a><a class="footer__link" href="/organization/">组织</a><a class="footer__link" href="/starter-kits/">配套工具</a><a class="footer__link" href="/comparison/">比较</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">商店</a><a class="footer__link" href="/glossary/">概念术语</a><a class="footer__link" href="/branding/">品牌</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">更新日志</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="/7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body></html>